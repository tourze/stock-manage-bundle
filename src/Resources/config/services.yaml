services:
  _defaults:
    autowire: true
    autoconfigure: true
    public: false

  # 明确定义所有服务，不使用 exclude
  Tourze\StockManageBundle\Service\:
    resource: '../../Service/*'

  Tourze\StockManageBundle\Repository\:
    resource: '../../Repository/*'

  Tourze\StockManageBundle\EventListener\:
    resource: '../../EventListener/*'

  Tourze\StockManageBundle\Controller\:
    resource: '../../Controller/*'
    tags: ['controller.service_arguments']

  Tourze\StockManageBundle\Command\:
    resource: '../../Command/*'
    tags: ['console.command']

  Tourze\StockManageBundle\Procedure\:
    resource: '../../Procedure/*'

  # 核心服务接口声明
  Tourze\StockManageBundle\Service\StockServiceInterface:
    alias: Tourze\StockManageBundle\Service\StockService
    public: true

  Tourze\StockManageBundle\Service\ReservationServiceInterface:
    alias: Tourze\StockManageBundle\Service\ReservationService
    public: true

  Tourze\StockManageBundle\Service\AlertServiceInterface:
    alias: Tourze\StockManageBundle\Service\AlertService
    public: true

  Tourze\StockManageBundle\Service\InboundServiceInterface:
    alias: Tourze\StockManageBundle\Service\InboundService
    public: true

  Tourze\StockManageBundle\Service\OutboundServiceInterface:
    alias: Tourze\StockManageBundle\Service\OutboundService
    public: true

  Tourze\StockManageBundle\Service\SnapshotServiceInterface:
    alias: Tourze\StockManageBundle\Service\SnapshotService
    public: true

  Tourze\StockManageBundle\Service\BatchQueryServiceInterface:
    alias: Tourze\StockManageBundle\Service\BatchQueryService
    public: true

  # 策略服务自动标记
  Tourze\StockManageBundle\Service\AllocationStrategy\:
    resource: '../../Service/AllocationStrategy/*'
    tags: ['stock_manage.allocation_strategy']